@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix ex: <http://ex.com/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix schema: <http://schema.org/>.
@base <http://example.com/base/> .

<TriplesMapPerson>
  a rr:TriplesMap;
      
  rr:logicalTable [ rr:tableName "PEOPLE"; ] ;

  rr:subjectMap [ 
    rr:template "http://ex.com/Person/{name}{ln1}{ln2}"; 
    rr:class schema:Person; 
  ]; 

  rr:predicateObjectMap [ 
    rr:predicate schema:givenName;
    rr:objectMap [ 
      rr:column "name";
    ];
  ];

  rr:predicateObjectMap [ 
    rr:predicate schema:familyName;
    rr:objectMap [ 
      rr:template "{ln1}{ln2}";
    ];
  ];

  rr:predicateObjectMap [ 
    rr:predicate schema:name;
    rr:objectMap [ 
      rr:template "{name}{ln1}{ln2}";
    ];
  ];

  rr:predicateObjectMap [ 
    rr:predicate schema:email;
    rr:objectMap [ 
      rr:column "email";
    ];
  ];

  rr:predicateObjectMap [ 
    rr:predicate schema:hasCountry;
    rr:refObjectMap [ 
      rr:parentTriplesMap <TriplesMapCountry>;
      rr:joinCondition [
        rr:child "cName";
        rr:parent "cName";
      ]
    ];
  ];
.

<TriplesMapPublication>
    a rr:TriplesMap;
        
    rr:logicalTable [ rr:tableName "COMMENTS"; ] ;
  
    rr:subjectMap [ 
      rr:template "http://ex.com/Comment/{comment}{date}{username}"; 
      rr:class schema:SocialMediaPosting; 
    ]; 
  
    rr:predicateObjectMap [ 
      rr:predicate schema:comment;
      rr:objectMap [ 
        rr:column "comment";
      ];
    ];

    rr:predicateObjectMap [ 
      rr:predicate schema:dateCreated;
      rr:objectMap [ 
        rr:column "dateCreated";
        rr:datatype xsd:date;
      ];
    ];

    rr:predicateObjectMap [ 
      rr:predicate schema:dateModified;
      rr:objectMap [ 
        rr:column "modifiedDate";
        rr:datatype xsd:integer;
      ];
    ];


    rr:predicateObjectMap [ 
      rr:predicate schema:author;
      rr:refObjectMap [ 
        rr:parentTriplesMap <TriplesMapPerson>;
        rr:joinCondition [
          rr:child "username";
          rr:parent "author";
        ]
      ];
    ];
.

<TriplesMapCountry>
  a rr:TriplesMap;

  rr:logicalTable [ rr:tableName "COUNTRIES"; ] ;
  
    rr:subjectMap [ 
      rr:template "http://ex.com/Country/{cName}"; 
      rr:class schema:Country; 
    ]; 
  
    rr:predicateObjectMap [ 
      rr:predicate ex:officialName;
      rr:objectMap [ 
        rr:column "cOfficialName";
      ];
    ];
.


<TriplesMapModifiedDates>
  a rr:TriplesMap;

  rr:logicalTable [ rr:tableName "MODIFIEDDATES"; ] ;
  
    rr:subjectMap [ 
      rr:template "http://ex.com/ModifiedDate/{id}"; 
      rr:class ex:ModifiedDate; 
    ]; 

    rr:predicateObjectMap [
      rr:predicate ex:belongsTo;
      rr:refObjectMap [
        rr:parentTriplesMap <TriplesMapPublication>;
        rr:joinCondition [
          rr:child "id";
          rr:parent "modifiedDate";
        ];
      ];
    ];
  
    rr:predicateObjectMap [ 
      rr:predicate schema:date;
      rr:objectMap [ 
        rr:column "modifiedDate";
      ];
    ];
.

